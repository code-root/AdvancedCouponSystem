# ููุฎุต ุงูุชุญุณููุงุช ุงููุทุจูุฉ - Omolaat Integration

## โ ุงูุชุญุณููุงุช ุงููุทุจูุฉ ุนูู Client.php

### 1. ุฅุถุงูุฉ DynamicState (ูุทุงุจู ูู Python)
- โ ุฅุถุงูุฉ `$dynamicState` array ูุญูุธ ุงูููู ุงูุฏููุงููููุฉ
- โ ุญูุธ: `bubble_page_load_id`, `bubble_plp_token`, `bubble_client_version`, `app_last_change`, `user_id`

### 2. ุงุณุชุฎุฑุงุฌ ุงูููู ุงูุฏููุงููููุฉ ูู HTML
- โ ุฅุถุงูุฉ ุฏุงูุฉ `extractDynamicValues()` ุงูุชู ุชุณุชุฎุฑุฌ:
  - `bubble_page_load_id` ูู `window.bubble_page_load_id = "..."`
  - `bubble_plp_token` ูู `window.bubble_plp_token = "..."`
  - `bubble_client_version` ูู `/package/run_js/([a-f0-9]{30,64})/`
  - `app_last_change` ูู `last_change: function() { return "..."; }`

### 3. Headers ุงูุฏููุงููููุฉ
- โ ุฅุถุงูุฉ ุฏุงูุฉ `buildBubbleHeaders()` ุงูุชู ุชุณุชุฎุฏู ุงูููู ุงูุฏููุงููููุฉ
- โ ุฅุถุงูุฉ `X-Bubble-newautorun: false`
- โ ุฅุถุงูุฉ `sec-ch-ua`, `sec-ch-ua-mobile`, `sec-ch-ua-platform` headers
- โ ุงุณุชุฎุฏุงู `bubble_page_load_id` ุงูุฏููุงูููู ูู `X-Bubble-PL`
- โ ุงุณุชุฎุฏุงู `bubble_client_version` ุงูุฏููุงูููู ูู `X-Bubble-Client-Version`

### 4. ุชุญุฏูุซ initializeSession()
- โ ุงุณุชุฎุฑุงุฌ ุงูููู ุงูุฏููุงููููุฉ ูู HTML response
- โ ุงุณุชุฎุฑุงุฌ `user_id` ูู `/api/1.1/init/data` response (ูุทุงุจู ูู Python)
- โ ุงุณุชุฎุฏุงู Headers ุงูุฏููุงููููุฉ ูู `/user/hi` request

### 5. ุชุญุฏูุซ login()
- โ ุงุณุชุฎุฏุงู `user_id` ูู `dynamicState` (ูุณุชุฎุฑุฌ ูู init data) ูุน fallback ููู cookies
- โ ุงุณุชุฎุฏุงู Headers ุงูุฏููุงููููุฉ
- โ ุงุณุชุฎุฏุงู `app_last_change` ุงูุฏููุงูููู ูู payload
- โ ุชุญุฏูุซ `run_id` ู `server_call_id` ููุทุงุจู Python format
- โ ุชุญุฏูุซ `uid_generator.seed` ุฅูู `300710616359107460` (ูุทุงุจู ูู Python)
- โ ุชุญุฏูุซ `random_seed` ุฅูู `0.8659861322531154` (ูุทุงุจู ูู Python)
- โ ุชุญุฏูุซ `Current Page Width` ุฅูู `1521` (ูุทุงุจู ูู Python)
- โ ุฅุถุงูุฉ Login Success Validation (ุงูุชุญูู ูู `outcome === 'success'`)

### 6. ุชุญุฏูุซ search()
- โ ุงุณุชุฎุฏุงู Headers ุงูุฏููุงููููุฉ
- โ ุชุญุฏูุซ `X-Bubble-R` ููุจุญุซ

### 7. ุชุญุฏูุซ makeFiberId()
- โ ุชุญุฏูุซ ุงูุตูุบุฉ ููุทุงุจู Python: `f"{now_ms}x{now_ms % 10**18}"`

---

## ๐ ุงูููุงุฑูุฉ ุงูููุงุฆูุฉ

| ุงูููุฒุฉ | Python | Laravel (ูุจู) | Laravel (ุจุนุฏ) |
|--------|--------|---------------|---------------|
| ุงุณุชุฎุฑุงุฌ ุงูููู ูู HTML | โ | โ | โ |
| DynamicState | โ | โ | โ |
| Headers ุงูุฏููุงููููุฉ | โ | โ | โ |
| X-Bubble-newautorun | โ | โ | โ |
| sec-ch-ua headers | โ | โ | โ |
| Login validation | โ | โ | โ |
| User ID ูู init data | โ | โ๏ธ | โ |
| Fiber ID format | โ | โ๏ธ | โ |
| Login payload values | โ | โ๏ธ | โ |

---

## ๐ฏ ุงูููุงุฆุฏ

1. **ุงุณุชูุฑุงุฑ ุฃูุถู**: ุงุณุชุฎุฏุงู ุงูููู ุงูุฏููุงููููุฉ ูุถูู ุฃู ุงูููุฏ ุณูุนูู ุญุชู ุนูุฏ ุชุญุฏูุซุงุช Bubble.io
2. **ูุทุงุจูุฉ ูุงููุฉ**: ุงูููุฏ ุงูุขู ูุทุงุจู Python ุชูุงูุงู ูู ุงูุณููู
3. **ููุซูููุฉ ุฃุนูู**: Login validation ูุถูู ุงูุชุดุงู ูุดู ุชุณุฌูู ุงูุฏุฎูู ูุจูุฑุงู
4. **ุตูุงูุฉ ุฃุณูู**: ุงูููู ุงูุฏููุงููููุฉ ุชูุณุชุฎุฑุฌ ุชููุงุฆูุงู ุจุฏูุงู ูู ุงูุชุญุฏูุซ ุงููุฏูู

---

## ๐ ููุงุญุธุงุช

- ุฌููุน ุงูุชุญุณููุงุช ูุทุงุจูุฉ ูุณููู Python ูู `main2.py`
- ุงูููุฏ ุงูุขู ูุณุชุฎุฏู ููุณ ุงูููุทู ุงูุฏููุงูููู ุงูููุฌูุฏ ูู Python
- ุชู ุงูุญูุงุธ ุนูู ุงูุชูุงูู ูุน ุงูููุฏ ุงูููุฌูุฏ (fallback ููููู ุงูุซุงุจุชุฉ ุนูุฏ ุนุฏู ุชููุฑ ุงูููู ุงูุฏููุงููููุฉ)

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

1. ุฅุฒุงูุฉ ุงูููู ุงูุซุงุจุชุฉ (hardcoded) ุจุนุฏ ุงูุชุฃูุฏ ูู ุนูู ุงูููู ุงูุฏููุงููููุฉ
2. ุฅุถุงูุฉ logging ุฃูุถู ูุชุชุจุน ุงุณุชุฎุฑุงุฌ ุงูููู ุงูุฏููุงููููุฉ
3. ุฅุถุงูุฉ error handling ุฃูุถู ุนูุฏ ูุดู ุงุณุชุฎุฑุงุฌ ุงูููู

